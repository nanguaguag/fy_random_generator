<!DOCTYPE html>
<html>

<head>
    <title>您的号码</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0;  maximum-scale=1.0 user-scalable=no;">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="collapsable" content="none">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .prompt {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 5rem;
        }

        .container {
            text-align: center;
        }

        .number {
            display: inline-block;
            width: 12.5rem;
            height: 12.5rem;
            border-radius: 50%;
            border-width: 2rem;
            border-color: #80bdf3;
            border-style: solid;
            background-color: #4285f4;
            color: #ffffff;
            font-size: 4rem;
            line-height: 12.5rem;
            margin-bottom: 2.5rem;
        }

        .chosen {
            display: inline-block;
            width: 12.5rem;
            height: 12.5rem;
            border-radius: 50%;
            border-width: 2rem;
            border-color: #FFEE58;
            border-style: solid;
            background-color: #FBC02D;
            color: black;
            font-size: 4rem;
            line-height: 12.5rem;
            margin-bottom: 2.5rem;
        }
    </style>
</head>

<body>
    <div class="container">
        {% if has_rewarded %}
        <div class="prompt" style="color: #f5c344;">恭喜！您的号码被抽中</div>
        <div id="number_id" class="chosen" has_rewarded="{{ has_rewarded }}">
            {{ your_number }}
        </div>
        {% else %}
        <div class="prompt">您的号码为</div>
        <div id="number_id" class="number" has_rewarded="{{ has_rewarded }}">
            {{ your_number }}
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <script>
        let your_number = document.getElementById("number_id");
        var has_rewarded = your_number.getAttribute("has_rewarded");
        function confetti_effect() {
            console.log(has_rewarded);
            var count = 600;
            var defaults = {
                origin: { y: 0.7 }
            };

            function fire(particleRatio, opts) {
                confetti({
                    ...defaults,
                    ...opts,
                    particleCount: Math.floor(count * particleRatio)
                });
            }

            fire(0.25, {
                spread: 26,
                startVelocity: 55,
            });
            fire(0.2, {
                spread: 60,
            });
            fire(0.35, {
                spread: 100,
                decay: 0.91,
                scalar: 0.8
            });
            fire(0.1, {
                spread: 120,
                startVelocity: 25,
                decay: 0.92,
                scalar: 1.2
            });
            fire(0.1, {
                spread: 120,
                startVelocity: 45,
            });
        }

        if (has_rewarded === "True") {
            confetti_effect()
        }
    </script>

</body>

</html>
